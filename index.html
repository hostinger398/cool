<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BP Currency System - Cool Vibes</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
    :root {
      --bg-dark: #0f111a;
      --bg-darker: #080a12;
      --primary-gradient: linear-gradient(135deg, #7f53ac 0%, #647dee 100%);
      --secondary-gradient: linear-gradient(135deg, #f81ce5 0%, #6a11cb 100%);
      --accent-color: #ee82ee;
      --text-light: #e0e0ff;
      --text-muted: #a0a0c0;
      --btn-bg: #1e213a;
      --btn-hover-bg: #644de2;
      --shadow-glow: rgba(111, 111, 236, 0.5);
      --border-radius: 12px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg-dark);
      color: var(--text-light);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 10px;
      user-select: none;
    }
    .title {
      font-size: 3rem;
      font-weight: 700;
      background: var(--primary-gradient);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 0 0 10px var(--shadow-glow);
      letter-spacing: 2px;
    }
    .nav {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }
    .nav button {
      background: var(--btn-bg);
      border: none;
      color: var(--text-light);
      font-weight: 600;
      font-size: 1.1rem;
      padding: 12px 25px;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .nav button:hover,
    .nav button:focus {
      background: var(--btn-hover-bg);
      box-shadow: 0 0 15px var(--shadow-glow);
      color: #fff;
      transform: translateY(-2px);
    }
    .nav button.active {
      background: var(--secondary-gradient);
      box-shadow: 0 0 20px var(--shadow-glow);
      cursor: default;
      transform: scale(1.05);
      color: #fff;
    }
    .container {
      width: 100%;
      max-width: 740px;
      background: var(--bg-darker);
      border-radius: var(--border-radius);
      padding: 25px 30px;
      box-shadow: 0 0 30px rgba(99, 71, 123, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .tab { display: none; animation: fadeIn 0.6s ease forwards; }
    .tab.active { display: block; }
    .section {
      background: linear-gradient(145deg, #151724, #1c2050);
      padding: 20px 30px;
      border-radius: var(--border-radius);
      box-shadow: 0 0 25px rgba(111, 111, 236, 0.3);
      border: 1px solid rgba(99, 71, 123, 0.6);
      margin-bottom: 30px;
    }
    .subtitle {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 18px;
      background: var(--primary-gradient);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .pixel {
      font-family: 'Courier New', Courier, monospace;
      font-size: 1.15rem;
      letter-spacing: 1.2px;
      margin-bottom: 12px;
      color: var(--text-light);
    }
    .log {
      max-height: 180px;
      overflow-y: auto;
      background: rgba(50, 50, 80, 0.75);
      border-radius: 10px;
      border: 1px dashed #7f53ac;
      padding: 10px 15px;
      font-family: monospace;
      font-size: 0.95rem;
      color: #d7caff;
    }
    input[type="number"],
    input[type="text"] {
      width: 100%;
      padding: 12px 14px;
      margin-top: 6px;
      font-size: 1rem;
      border-radius: var(--border-radius);
      border: 1.8px solid #7f53ac;
      background: #1c1e44;
      color: #d7caff;
    }
    button {
      background: var(--secondary-gradient);
      border: none;
      border-radius: var(--border-radius);
      color: #fff;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 12px 28px;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(111, 111, 236, 0.6);
      transition: all 0.3s ease;
      margin-top: 12px;
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
    }
    button:hover,
    button:focus {
      background: var(--primary-gradient);
      box-shadow: 0 0 25px rgba(167, 100, 255, 0.9);
      transform: translateY(-3px);
    }
    label {
      display: block;
      margin-top: 18px;
      font-weight: 500;
      color: var(--text-muted);
      font-size: 0.9rem;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(7px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="title">BP CURRENCY SYSTEM</div>

  <nav class="nav">
    <button class="active" onclick="switchTab('home')">üè† Home</button>
    <button onclick="switchTab('trade')">üìà Trading</button>
    <button onclick="switchTab('transfer')">üîÅ Transfer</button>
    <button onclick="switchTab('income')">üìä Income</button>
    <button onclick="switchTab('expenses')">üìâ Expenses</button>
  </nav>

  <main class="container">
    <section class="tab active" id="home">
      <div class="section">
        <div class="subtitle">üí∞ Balance & Server Fee</div>
        <div class="pixel">Balance: <span id="balance">3000</span> BP</div>
        <button onclick="payServerFee()">Pay Server Fee</button>
        <div class="pixel">Next Fee Due: <span id="nextFee"></span></div>
      </div>
    </section>

    <section class="tab" id="trade">
      <div class="section">
        <div class="subtitle">üìà Trading Section</div>
        <div class="pixel">Wheat Price: <span id="wheatPrice"></span> BP /kg</div>
        <label for="wheatBpInput">BP to spend on Wheat:</label>
        <input id="wheatBpInput" type="number" min="1" />
        <button onclick="buy('wheat')">Buy Wheat</button>

        <label for="wheatKgInput">KG of Wheat to Sell:</label>
        <input id="wheatKgInput" type="number" min="0.01" step="0.01" />
        <button onclick="sell('wheat')">Sell Wheat</button>

        <div class="pixel" style="margin-top: 25px;">Wool Price: <span id="woolPrice"></span> BP /kg</div>
        <label for="woolBpInput">BP to spend on Wool:</label>
        <input id="woolBpInput" type="number" min="1" />
        <button onclick="buy('wool')">Buy Wool</button>

        <label for="woolKgInput">KG of Wool to Sell:</label>
        <input id="woolKgInput" type="number" min="0.01" step="0.01" />
        <button onclick="sell('wool')">Sell Wool</button>
      </div>
    </section>

    <section class="tab" id="transfer">
      <div class="section">
        <div class="subtitle">üîÅ Transfer BP</div>
        <input type="number" id="sendAmount" placeholder="Amount to send" />
        <button onclick="generateCode()">Generate Code</button>
        <div class="pixel">Transfer Code: <span id="transferCode"></span></div>
        <input type="text" id="redeemCode" placeholder="Paste code" />
        <button onclick="redeemCode()">Redeem</button>
      </div>
    </section>

    <section class="tab" id="income">
      <div class="section">
        <div class="subtitle">üìä Income</div>
        <div class="log" id="incomeLog"></div>
      </div>
    </section>

    <section class="tab" id="expenses">
      <div class="section">
        <div class="subtitle">üìâ Expenses</div>
        <div class="log" id="expenseLog"></div>
      </div>
    </section>
  </main>

  <script>
    function switchTab(id) {
      document.querySelectorAll('.nav button').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('onclick').includes(id));
      });
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.toggle('active', tab.id === id);
      });
    }

    let balance = 3000;
    let feeAmount = 50;
    let wheatPrice = randomPrice(140, 180);
    let woolPrice = randomPrice(50, 90);
    let serverFeeDue = new Date();
    let codes = {};

    function updateBalanceDisplay() {
      document.getElementById('balance').textContent = balance.toFixed(2);
    }

    function updateNextFeeDisplay() {
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('nextFee').textContent = serverFeeDue.toLocaleDateString(undefined, options);
    }

    function payServerFee() {
      if (balance >= feeAmount) {
        balance -= feeAmount;
        serverFeeDue.setMonth(serverFeeDue.getMonth() + 1);
        updateBalanceDisplay();
        updateNextFeeDisplay();
        logExpense(`Server Fee Paid: ${feeAmount} BP`);
        alert('Server fee paid.');
      } else {
        alert('Not enough BP to pay fee.');
      }
    }

    function buy(item) {
      let price = item === 'wheat' ? wheatPrice : woolPrice;
      let input = document.getElementById(item + 'BpInput');
      let bpAmount = parseFloat(input.value);
      if (isNaN(bpAmount) || bpAmount <= 0) return alert('Invalid amount');
      if (bpAmount > balance) return alert('Not enough BP');
      let kg = Math.floor((bpAmount / price) * 100) / 100;
      balance -= bpAmount;
      updateBalanceDisplay();
      logExpense(`Bought ${kg} kg ${item} for ${bpAmount} BP`);
      alert(`Bought ${kg} kg ${item}`);
      input.value = '';
    }

    function sell(item) {
      let price = item === 'wheat' ? wheatPrice : woolPrice;
      let input = document.getElementById(item + 'KgInput');
      let kg = parseFloat(input.value);
      if (isNaN(kg) || kg <= 0) return alert('Invalid kg');
      let earned = Math.floor((kg * price) * 100) / 100;
      balance += earned;
      updateBalanceDisplay();
      logIncome(`Sold ${kg} kg ${item} for ${earned} BP`);
      alert(`Sold ${kg} kg ${item}`);
      input.value = '';
    }

    function generateCode() {
      let amt = parseFloat(document.getElementById('sendAmount').value);
      if (isNaN(amt) || amt <= 0) return alert('Invalid amount');
      if (amt > balance) return alert('Not enough BP');
      let code = Math.random().toString(36).substring(2, 8);
      codes[code] = amt;
      balance -= amt;
      updateBalanceDisplay();
      logExpense(`Transfer Sent: ${amt} BP (Code: ${code})`);
      document.getElementById('transferCode').textContent = code;
    }

    function redeemCode() {
      let code = document.getElementById('redeemCode').value.trim();
      if (codes[code]) {
        let amt = codes[code];
        balance += amt;
        updateBalanceDisplay();
        logIncome(`Transfer Received: ${amt} BP (Code: ${code})`);
        delete codes[code];
        alert(`Redeemed ${amt} BP`);
        document.getElementById('redeemCode').value = '';
      } else {
        alert('Invalid or used code');
      }
    }

    function randomPrice(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function refreshPrices() {
      document.getElementById('wheatPrice').textContent = wheatPrice;
      document.getElementById('woolPrice').textContent = woolPrice;
    }

    function updatePricesPeriodically() {
      setInterval(() => {
        wheatPrice = randomPrice(140, 180);
        woolPrice = randomPrice(50, 90);
        refreshPrices();
        logIncome(`Market Update - Wheat: ${wheatPrice} BP/kg, Wool: ${woolPrice} BP/kg`);
      }, 10000); // updates every 10 seconds
    }

    function logIncome(msg) {
      let log = document.getElementById('incomeLog');
      log.innerHTML += `‚Ä¢ ${msg}<br>`;
      log.scrollTop = log.scrollHeight;
    }

    function logExpense(msg) {
      let log = document.getElementById('expenseLog');
      log.innerHTML += `‚Ä¢ ${msg}<br>`;
      log.scrollTop = log.scrollHeight;
    }

    updateBalanceDisplay();
    updateNextFeeDisplay();
    refreshPrices();
    updatePricesPeriodically();
  </script>
</body>
</html>
